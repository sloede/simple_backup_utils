#!/bin/bash

DEFAULT_CONFIG_FILE=$HOME/.sburc
DEFAULT_LOCAL_BACKUP_DIR=$HOME/backups

# Ask user for local backup directory
echo -n "Where should local backups be stored [$DEFAULT_LOCAL_BACKUP_DIR]? "
read local_backup_dir
if [ -z "$local_backup_dir" ]; then
  local_backup_dir=$DEFAULT_LOCAL_BACKUP_DIR
fi
echo "Creating backup directory '$local_backup_dir'..."
mkdir -p $local_backup_dir
if [ $? -ne 0 ]; then
  echo "error: could not create backup directory" >&2
  exit 1
fi

# Write configuration file
echo "Writing configuration to '$DEFAULT_CONFIG_FILE'..."
echo "local_backup_dir = $local_backup_dir" > $DEFAULT_CONFIG_FILE
if [ $? -ne 0 ]; then
  echo "error: could not write configuration" >&2
  exit 1
fi
